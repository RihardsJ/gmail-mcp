#!/bin/sh
# Pre-push hook to run tests before pushing to remote

echo "Running pre-push tests..."
echo ""

# Run tests
uv run pytest --tb=short -q

# Capture exit code
TEST_EXIT_CODE=$?

if [ $TEST_EXIT_CODE -ne 0 ]; then
    echo ""
    echo "❌ Tests failed! Push aborted."
    echo "Fix the failing tests before pushing, or use 'git push --no-verify' to skip this check."
    exit 1
fi

echo ""
echo "✅ All tests passed! Proceeding with push..."
exit 0
